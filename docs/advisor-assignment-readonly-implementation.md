# 지도교수 배정 기능 수정 구현 문서

## 개요
학교 ERP 시스템에서 연구계획서 등록 및 지도교수 배정을 관리하므로, 본 시스템에서는 **조회 기능만** 제공하도록 수정

## 구현 내용

### 1. 관리자 화면 수정

#### 파일: `admin/admin_views.js`
- **라인 2562-2572**: 지도교수 배정 테이블에서 "관리" 컬럼 헤더 제거
- **라인 2611-2616**: 테이블 행에서 "배정/재배정" 버튼 컬럼 제거

#### 파일: `admin/admin_main.js`
- **라인 3527-3536**: 연구계획서 상세 화면에 "학교 시스템 연구계획서 폼 불러오기" 버튼 추가
- **라인 3569-3580**: 지도교수 배정이 학교 시스템에서 관리된다는 안내 메시지 추가
- **라인 4828-4849**: `loadProposalForm(proposalId)` 함수 추가
  - 연구계획서의 `formUrl`을 새 창으로 열기
  - 팝업 차단 여부 확인
  - formUrl이 없는 경우 안내 메시지 표시

### 2. Mock 데이터 수정

#### 파일: `admin/assets/js/mockData.js`
- **라인 54-74**: 모든 연구계획서 데이터(RP002-RP020)에 `formUrl` 필드 추가
- **형식**: `https://school-system.hycu.ac.kr/research-proposal/[ID].pdf`
- **총 19개 항목** 업데이트 완료

### 3. 학생 화면 수정

#### 파일: `student/assets/js/advisor-assignment.js`

**주요 변경사항:**
1. **파일 헤더 주석 수정 (라인 1-3)**
   - 기능 설명을 "읽기 전용 조회 기능"으로 명시
   - 학교 시스템에서 등록/배정 관리한다는 내용 추가

2. **연구계획서 미제출 시 안내 메시지 개선 (라인 50-68)**
   ```javascript
   <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg">
       <p class="font-semibold">학교 시스템에서 연구계획서를 등록해주세요.</p>
       <p>연구계획서는 학교의 ERP 시스템에서 등록하며, 등록된 데이터가 자동으로 이곳에 표시됩니다.</p>
       <p>지도교수 배정은 연구계획서 등록 후 학교에서 자동으로 진행됩니다.</p>
   </div>
   ```

3. **연구계획서 제출 관련 함수 제거**
   - `showStudentProposalForm()` 함수 제거 (기존 라인 100-196)
   - `submitStudentProposal()` 함수 제거 (기존 라인 198-239)
   - `updateStudentProposal()` 함수 제거 (기존 라인 296-318)

4. **새 함수 추가: `loadProposalFormStudent()` (라인 100-119)**
   ```javascript
   function loadProposalFormStudent(proposalId) {
       const proposal = mockResearchProposals.find(p => p.id === proposalId);
       if (proposal.formUrl) {
           window.open(proposal.formUrl, '_blank', 'width=1024,height=768');
       } else {
           alert('학교 시스템에 등록된 연구계획서 폼이 없습니다.');
       }
   }
   ```

5. **연구계획서 상세 보기 함수 수정 (라인 121-294)**
   - 제목: "연구계획서 수정" → "연구계획서 조회"
   - 모든 입력 필드를 읽기 전용 `<div>`로 변경
   - 배경색을 `bg-gray-50`로 설정하여 읽기 전용임을 시각적으로 표시
   - "학교 시스템 연구계획서 폼 불러오기" 버튼 추가 (라인 186-192)
   - "취소", "수정" 버튼 제거
   - 하단에 학교 시스템 관리 안내 메시지 추가 (라인 278-291)

6. **목록 화면 복원 함수 수정 (라인 296-343)**
   - "연구계획서 등록" 버튼 제거
   - 헤더 설명 텍스트 수정: "학교 시스템에 등록된 연구계획서와 배정된 지도교수를 조회합니다."

## 기능 흐름

### 관리자
1. 지도교수 배정 메뉴 접근
2. 연구계획서 목록 조회 (배정 버튼 없음)
3. 행 클릭 → 연구계획서 상세 조회
4. "학교 시스템 연구계획서 폼 불러오기" 버튼 클릭
5. 새 창에서 학교 시스템의 연구계획서 PDF 표시

### 학생
1. 지도교수 배정 메뉴 접근
2. 연구계획서가 없으면: 학교 시스템에서 등록하라는 안내 메시지
3. 연구계획서가 있으면: 본인의 연구계획서 조회
4. 행 클릭 → 연구계획서 상세 조회 (읽기 전용)
5. 지도교수 배정 현황 확인
6. "학교 시스템 연구계획서 폼 불러오기" 버튼으로 원본 폼 확인

### 교수
- 기존과 동일하게 읽기 전용 유지

## 테스트 항목

### 관리자 화면
- [ ] 지도교수 배정 테이블에 "배정" 컬럼이 표시되지 않는가?
- [ ] 연구계획서 상세 화면에 "학교 시스템 연구계획서 폼 불러오기" 버튼이 표시되는가?
- [ ] 버튼 클릭 시 새 창이 열리는가?
- [ ] formUrl이 올바른 URL 형식인가?
- [ ] 안내 메시지가 표시되는가?

### 학생 화면
- [ ] 연구계획서가 없는 학생(STU001)의 경우 올바른 안내 메시지가 표시되는가?
- [ ] 연구계획서가 있는 학생(STU002-STU020)의 경우 목록이 표시되는가?
- [ ] 상세 화면이 읽기 전용으로 표시되는가? (입력 필드 없음)
- [ ] "학교 시스템 연구계획서 폼 불러오기" 버튼이 작동하는가?
- [ ] 지도교수 배정 현황이 올바르게 표시되는가?
- [ ] 하단 안내 메시지가 표시되는가?

### Mock 데이터
- [ ] 모든 연구계획서(RP002-RP020)에 formUrl 필드가 있는가?
- [ ] formUrl이 올바른 형식인가?

## 주의사항

1. **STU001 학생**은 연구계획서를 제출하지 않은 상태로 설정되어 있어, 학생 화면 테스트 시 안내 메시지를 확인할 수 있습니다.

2. **실제 배포 시** `formUrl`의 도메인을 실제 학교 시스템 URL로 변경해야 합니다.

3. **팝업 차단**: 브라우저의 팝업 차단 설정에 따라 새 창이 열리지 않을 수 있으므로, 사용자에게 팝업 허용 안내가 필요합니다.

4. **권한 관리**: 실제 시스템에서는 학교 시스템 연동 시 적절한 인증 및 권한 검증이 필요합니다.

## 구현 완료 일자
2025-12-10

## 구현자
Claude Sonnet 4.5
