<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>논문 지도 시스템 - 교수용</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- 공식 UI 가이드라인 폰트 -->
    <link rel="stylesheet" as="style" crossorigin
          href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />

    <!-- 공통 스타일 -->
    <link rel="stylesheet" href="../common-style.css">
    <link rel="stylesheet" href="../common-search.css">
    
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/guidance.css">
    <link rel="stylesheet" href="assets/css/semester-guidance.css">
    <link rel="stylesheet" href="assets/css/semester-guidance-v2.css">
    <link rel="stylesheet" href="assets/css/meeting-v2.css">
    <link rel="stylesheet" href="assets/css/feedback.css">
    <link rel="stylesheet" href="assets/css/review.css">
    
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    
    <!-- Video.js JS -->
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
    
    <!-- PDF.js -->
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.16.105/build/pdf.min.js"></script>
    
    <!-- Fabric.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>
</head>
<body class="bg-gray-100">
    
    <!-- ===================================
         메인 레이아웃
         ⚠️ 주의: SSO 인증은 외부 시스템에서 처리됨
         =================================== -->
    <div class="relative flex min-h-screen">
        
        <!-- 좌측 사이드바 -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 w-64 bg-white shadow-lg flex-shrink-0 p-4 z-30 transition-transform duration-300 ease-in-out sm:relative sm:translate-x-0">
            <!-- 로고 영역 -->
            <div class="mb-8">
                <img src="https://i.ibb.co/271kh4Tt/HYCU-GS-SIGNATURE.png"
                     alt="한양사이버대학교 대학원 로고"
                     class="w-full mb-2"
                     onerror="this.onerror=null; this.src='https://placehold.co/200x40/FFFFFF/6A0028?text=HYCU+GS';">
                <h1 class="text-xl font-bold text-gray-800 pl-4">논문 지도 시스템</h1>

                <!-- 역할 표시 -->
                <div class="mt-2 pl-4">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        지도교수
                    </span>
                </div>
            </div>
            
            <nav>
                <!-- 대시보드 -->
                <a href="#" onclick="showScreen('dashboard'); return false;" data-screen="dashboard"
                   class="sidebar-link active flex items-center p-3 rounded-lg text-gray-700 transition-colors duration-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    <span class="ml-4">대시보드</span>
                </a>

                <!-- 논문 안내 (1depth) -->
                <div class="mt-2">
                    <button onclick="toggleSubmenu('guidance-info')" class="sidebar-link flex items-center justify-between w-full p-3 rounded-lg text-gray-700 transition-colors duration-200">
                        <div class="flex items-center">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="ml-4">논문 안내</span>
                        </div>
                        <svg class="w-4 h-4 transition-transform" id="guidance-info-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <!-- 2depth 메뉴 -->
                    <div id="guidance-info-submenu" class="pl-6 mt-1 space-y-1">
                        <a href="#" onclick="showScreen('notice'); return false;" data-screen="notice"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">공지사항</span>
                        </a>
                        <a href="#" onclick="showScreen('board'); return false;" data-screen="board"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">자료실</span>
                        </a>
                        <a href="#" onclick="showScreen('ethics'); return false;" data-screen="ethics"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">연구윤리</span>
                        </a>
                        <a href="#" onclick="showScreen('schedule'); return false;" data-screen="schedule"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">논문일정</span>
                        </a>
                        <a href="#" onclick="showScreen('process'); return false;" data-screen="process"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">논문지도절차</span>
                        </a>
                    </div>
                </div>

                <!-- 논문지도 (1depth) -->
                <div class="mt-2">
                    <button onclick="toggleSubmenu('thesis-guidance')" class="sidebar-link flex items-center justify-between w-full p-3 rounded-lg text-gray-700 transition-colors duration-200">
                        <div class="flex items-center">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            <span class="ml-4">논문지도</span>
                        </div>
                        <svg class="w-4 h-4 transition-transform" id="thesis-guidance-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <!-- 2depth 메뉴 -->
                    <div id="thesis-guidance-submenu" class="pl-6 mt-1 space-y-1">
                        <a href="#" onclick="showScreen('advisor-assignment'); return false;" data-screen="advisor-assignment"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">지도교수 배정</span>
                        </a>
                        <a href="#" onclick="showScreen('guidance'); return false;" data-screen="guidance"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">주차별 논문지도 현황</span>
                        </a>
                        <a href="#" onclick="showScreen('feedback'); return false;" data-screen="feedback"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">논문 지도 현황</span>
                        </a>
                        <a href="#" onclick="showScreen('meeting'); return false;" data-screen="meeting"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">실시간 지도 예약</span>
                        </a>
                    </div>
                </div>

                <!-- 논문심사 (1depth) -->
                <div class="mt-2">
                    <button onclick="toggleSubmenu('thesis-review')" class="sidebar-link flex items-center justify-between w-full p-3 rounded-lg text-gray-700 transition-colors duration-200">
                        <div class="flex items-center">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                            </svg>
                            <span class="ml-4">논문 심사</span>
                        </div>
                        <svg class="w-4 h-4 transition-transform" id="thesis-review-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <!-- 2depth 메뉴 -->
                    <div id="thesis-review-submenu" class="pl-6 mt-1 space-y-1">
                        <a href="#" onclick="showScreen('review'); return false;" data-screen="review"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">학위 논문 심사</span>
                        </a>
                        <a href="#" onclick="showScreen('journal-review'); return false;" data-screen="journal-review"
                           class="sidebar-sublink flex items-center p-2 rounded-lg text-sm text-gray-600 hover:bg-gray-100 transition-colors duration-200">
                            <span class="ml-4">학술지 논문 심사</span>
                        </a>
                    </div>
                </div>

</nav>
        </aside>

        <!-- Header -->
        <header class="bg-white shadow-sm border-b fixed top-0 right-0 left-0 md:left-64 z-20">
            <div class="flex items-center justify-between px-6 py-4">
                <!-- 모바일 메뉴 -->
                <button id="sidebarToggle" class="md:hidden" onclick="toggleMobileMenu()">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>

                <!-- 유틸리티 메뉴 -->
                <div class="flex items-center space-x-3 ml-auto">
                    <!-- 알림 -->
                    <button onclick="toggleNotifications()"
                            class="relative flex items-center justify-center w-10 h-10 hover:bg-gray-100 rounded-lg transition-colors"
                            title="알림">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                        <span id="notificationBadge" class="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                    </button>

                    <!-- 알림 드롭다운 -->
                    <div id="notificationDropdown"
                         class="hidden absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border z-50"
                         style="top: 60px;">
                        <div class="p-4 border-b">
                            <h3 class="font-bold">알림</h3>
                        </div>
                        <div id="notificationList" class="max-h-96 overflow-y-auto">
                            <div class="border-b hover:bg-gray-50 p-4 cursor-pointer">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">학생의 논문 제출이 완료되었습니다</p>
                                        <p class="text-xs text-gray-500 mt-1">홍길동(2024001) 학생이 중간논문을 제출했습니다.</p>
                                        <p class="text-xs text-gray-400 mt-1">1시간 전</p>
                                    </div>
                                </div>
                            </div>
                            <div class="border-b hover:bg-gray-50 p-4 cursor-pointer">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 w-2 h-2 bg-green-500 rounded-full mt-2"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">새로운 미팅 요청이 있습니다</p>
                                        <p class="text-xs text-gray-500 mt-1">김영희(2024002) 학생이 논문 상담을 요청했습니다.</p>
                                        <p class="text-xs text-gray-400 mt-1">3시간 전</p>
                                    </div>
                                </div>
                            </div>
                            <div class="border-b hover:bg-gray-50 p-4 cursor-pointer">
                                <div class="flex items-start gap-3">
                                    <div class="flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-800">피드백 작성 기한이 임박했습니다</p>
                                        <p class="text-xs text-gray-500 mt-1">이철수(2024003) 학생의 주차별 실적 피드백을 작성해주세요.</p>
                                        <p class="text-xs text-gray-400 mt-1">6시간 전</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 영문버전 전환 -->
                    <button onclick="switchLanguage()"
                            class="flex items-center justify-center w-10 h-10 hover:bg-gray-100 rounded-lg transition-colors"
                            title="Switch to English">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
                        </svg>
                    </button>

                    <!-- 사용자 정보 -->
                    <div class="flex items-center space-x-2 px-3 h-10 bg-gray-50 rounded-lg">
                        <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <span id="userName" class="text-sm font-medium">김교수</span>
                    </div>

                    <!-- 로그아웃 -->
                    <button onclick="logout()"
                            class="flex items-center space-x-2 px-4 h-10 hover:bg-gray-100 rounded-lg transition-colors"
                            title="로그아웃">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        <span class="text-sm font-medium">로그아웃</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- 메인 콘텐츠 영역 -->
        <main class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto mt-16" style="background-color: #F9F9F9;">
            
            <!-- ===================================
                 지도교수 배정 화면
                 =================================== -->
            <section id="advisor-assignment-screen" class="content-screen">
                <div class="bg-white rounded-lg shadow-md">
                    <!-- 헤더 -->
                    <div class="p-6 border-b">
                        <h2 class="text-xl font-semibold text-gray-800">지도교수 배정</h2>
                        <p class="text-sm text-gray-600 mt-1">나의 지도 학생 목록을 조회합니다.</p>
                    </div>

                    <!-- 검색 옵션 (관리자 화면과 동일) -->
                    <div class="p-6 border-b">
                        <div class="search-container">
                            <div class="search-grid">
                                <!-- 1. 학년도 -->
                                <div class="search-field">
                                    <label class="search-label" style="display: block; font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.25rem;">
                                        학년도
                                    </label>
                                    <select id="prof-advisor-search-year" class="search-select">
                                        <option value="">전체</option>
                                        <option value="2025">2025</option>
                                        <option value="2024">2024</option>
                                        <option value="2023">2023</option>
                                    </select>
                                </div>

                                <!-- 2. 학기 -->
                                <div class="search-field">
                                    <label class="search-label" style="display: block; font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.25rem;">
                                        학기
                                    </label>
                                    <select id="prof-advisor-search-semester" class="search-select">
                                        <option value="">전체</option>
                                        <option value="1">1학기</option>
                                        <option value="2">2학기</option>
                                    </select>
                                </div>

                                <!-- 3. 학기차 -->
                                <div class="search-field">
                                    <label class="search-label" style="display: block; font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.25rem;">
                                        학기차
                                    </label>
                                    <input type="text" id="prof-advisor-search-semester-count" placeholder="학기차 입력"
                                           class="search-input">
                                </div>

                                <!-- 4. 학과/전공 -->
                                <div class="search-field">
                                    <label class="search-label" style="display: block; font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.25rem;">
                                        학과/전공
                                    </label>
                                    <select id="prof-advisor-search-department" class="search-select">
                                        <option value="">전체</option>
                                    </select>
                                </div>

                                <!-- 5. 학번 -->
                                <div class="search-field">
                                    <label class="search-label" style="display: block; font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.25rem;">
                                        학번
                                    </label>
                                    <input type="text" id="prof-advisor-search-student-id" placeholder="학번 입력"
                                           class="search-input">
                                </div>

                                <!-- 6. 이름 -->
                                <div class="search-field">
                                    <label class="search-label" style="display: block; font-size: 0.875rem; font-weight: 600; color: #374151; margin-bottom: 0.25rem;">
                                        이름
                                    </label>
                                    <input type="text" id="prof-advisor-search-student-name" placeholder="이름 입력"
                                           class="search-input">
                                </div>
                            </div>

                            <!-- 검색/초기화 버튼 -->
                            <div class="search-buttons">
                                <button onclick="searchProfessorAdvisorAssignment()" class="search-btn search-btn-primary">
                                    <i class="fas fa-search"></i>검색
                                </button>
                                <button onclick="resetProfessorAdvisorSearch()" class="search-btn search-btn-secondary">
                                    <i class="fas fa-redo"></i>초기화
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 학생 목록 테이블 -->
                    <div class="p-6">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">학년도</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">학기차</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">학번</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">학과</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">성명</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">학위과정</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">지도교수</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">부지도교수</th>
                                    </tr>
                                </thead>
                                <tbody id="professor-student-list" class="bg-white divide-y divide-gray-200">
                                    <!-- JavaScript로 동적 생성 -->
                                </tbody>
                            </table>
                        </div>

                        <div id="professor-no-students" class="text-center py-8 text-gray-500" style="display: none;">
                            <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            <p>지도 학생이 없습니다.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ===================================
                 대시보드 화면
                 =================================== -->
            <section id="dashboard-screen" class="content-screen active">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <!-- 모바일 메뉴 토글 버튼 -->
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()" 
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">대시보드</h2>
                            <p class="text-sm text-gray-600 mt-2">논문지도 현황과 처리할 업무를 한눈에 확인할 수 있습니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 -->
                <div id="content-area">
                    <!-- 요약 카드 -->
                    <div id="summary-cards" class="summary-cards">
                        <!-- JavaScript로 동적 생성 -->
                    </div>
                    
                    <!-- 메인 콘텐츠 그리드 -->
                    <div class="dashboard-grid">
                        
                        <!-- 좌측: To-Do 목록 -->
                        <div class="card">
                            <div class="card-header">
                                <h2>처리 승인대기 사항</h2>
                                <span class="badge badge-danger" id="todo-count">5</span>
                            </div>
                            <div class="card-body">
                                <div id="todo-list">
                                    <!-- JavaScript로 동적 생성 -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- 우측: 최근 활동 -->
                        <div class="card">
                            <div class="card-header">
                                <h2>최근 활동</h2>
                            </div>
                            <div class="card-body">
                                <div id="activity-timeline">
                                    <!-- JavaScript로 동적 생성 -->
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- 단계별 현황 차트 -->
                    <div class="card">
                        <div class="card-header">
                            <h2>학생 단계별 현황</h2>
                        </div>
                        <div class="card-body">
                            <div id="stage-chart">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ===================================
                 지도학생관리 화면
                 =================================== -->
            <section id="guidance-screen" class="content-screen">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()"
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">주차별 논문지도 현황</h2>
                            <p class="text-sm text-gray-600 mt-2">학생별 주차별 논문지도 실적을 입력하고 관리할 수 있습니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 영역 (JavaScript로 동적 생성) -->
                <div id="guidance-content-area">
                    <!-- 목록 or 상세 화면이 여기에 렌더링됨 -->
                </div>
            </section>
            
            <!-- ===================================
                 랩미팅관리 화면
                 =================================== -->
            <section id="meeting-screen" class="content-screen">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()"
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">실시간 지도 예약</h2>
                            <p class="text-sm text-gray-600 mt-2">학생과의 실시간 화상 미팅을 예약하고 관리할 수 있습니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 영역 (JavaScript로 동적 생성) -->
                <div id="meeting-content-area">
                    <!-- 랩미팅 관리 화면이 여기에 렌더링됨 -->
                </div>
            </section>
            
            <!-- ===================================
                 온라인피드백 화면
                 =================================== -->
            <section id="feedback-screen" class="content-screen">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()"
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">논문 지도 현황</h2>
                            <p class="text-sm text-gray-600 mt-2">논문 지도 단계별로 학생 현황을 확인할 수 있습니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 논문지도 단계 선택 (태그 버튼) -->
                <div class="bg-white rounded-lg shadow-md p-4 mb-4">
                    <h3 class="text-sm font-semibold text-gray-700 mb-3">논문 지도 단계 선택</h3>
                    <div class="flex flex-wrap gap-3">
                        <button id="feedback-stage-all" class="filter-chip active" onclick="toggleFeedbackStage('all')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            전체
                        </button>
                        <button id="feedback-stage-proposal" class="filter-chip" onclick="toggleFeedbackStage('proposal')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            연구계획서
                        </button>
                        <button id="feedback-stage-interim" class="filter-chip" onclick="toggleFeedbackStage('interim')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            1차 보고서
                        </button>
                        <button id="feedback-stage-final" class="filter-chip" onclick="toggleFeedbackStage('final')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            최종논문
                        </button>
                    </div>
                </div>

                <!-- 검색 영역 -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-4">
                    <div class="search-container">
                        <div class="search-grid">
                            <div class="search-field">
                                <label class="search-label">대학원</label>
                                <select id="feedback-filter-graduate" class="search-select">
                                    <option value="">전체</option>
                                    <option value="일반대학원">일반대학원</option>
                                    <option value="디자인대학원">디자인대학원</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">전공/학과</label>
                                <select id="feedback-filter-major" class="search-select">
                                    <option value="">전체</option>
                                    <option value="컴퓨터공학과">컴퓨터공학과</option>
                                    <option value="경영학과">경영학과</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학위과정</label>
                                <select id="feedback-filter-degree" class="search-select">
                                    <option value="">전체</option>
                                    <option value="석사">석사</option>
                                    <option value="박사">박사</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학년도</label>
                                <select id="feedback-filter-year" class="search-select">
                                    <option value="">전체</option>
                                    <option value="2025">2025학년도</option>
                                    <option value="2024">2024학년도</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학기차</label>
                                <select id="feedback-filter-semester-count" class="search-select">
                                    <option value="">전체</option>
                                    <option value="1">1학기차</option>
                                    <option value="2">2학기차</option>
                                    <option value="3">3학기차</option>
                                    <option value="4">4학기차</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학번</label>
                                <input type="text" id="feedback-filter-student-id" placeholder="학번 입력" class="search-input">
                            </div>
                            <div class="search-field">
                                <label class="search-label">성명</label>
                                <input type="text" id="feedback-filter-name" placeholder="성명 입력" class="search-input">
                            </div>
                            <div class="search-field">
                                <label class="search-label">논문명</label>
                                <input type="text" id="feedback-filter-thesis" placeholder="논문명 입력" class="search-input">
                            </div>
                        </div>
                        <div class="search-buttons">
                            <button onclick="searchFeedback()" class="btn-primary">
                                <i class="fas fa-search"></i> 검색
                            </button>
                            <button onclick="resetFeedbackSearch()" class="btn-secondary">
                                <i class="fas fa-redo"></i> 초기화
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 -->
                <div id="online-feedback-content">
                    <!-- feedback-list.js에서 동적으로 렌더링 -->
                </div>
            </section>
            
            <!-- ===================================
                 심사관리 화면
                 =================================== -->
            <section id="review-screen" class="content-screen">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()"
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">논문 심사</h2>
                            <p class="text-sm text-gray-600 mt-2">심사할 논문 단계를 선택하여 조회할 수 있습니다.</p>
                        </div>
                    </div>
                </div>

                <!-- 심사 단계 선택 (태그 버튼) -->
                <div class="bg-white rounded-lg shadow-md p-4 mb-4">
                    <h3 class="text-sm font-semibold text-gray-700 mb-3">심사 단계 선택</h3>
                    <div class="flex flex-wrap gap-3">
                        <button id="stage-all" class="filter-chip active" onclick="toggleReviewStage('all')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            전체
                        </button>
                        <button id="stage-proposal" class="filter-chip" onclick="toggleReviewStage('proposal')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            연구계획서
                        </button>
                        <button id="stage-interim" class="filter-chip" onclick="toggleReviewStage('interim')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            1차 보고서
                        </button>
                        <button id="stage-final" class="filter-chip" onclick="toggleReviewStage('final')">
                            <svg class="check-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                            </svg>
                            최종논문
                        </button>
                    </div>
                </div>

                <!-- 검색 영역 -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-4">
                    <div class="search-container">
                        <div class="search-grid">
                            <div class="search-field">
                                <label class="search-label">대학원</label>
                                <select id="filter-graduate" class="search-select">
                                    <option value="">전체</option>
                                    <option value="일반대학원">일반대학원</option>
                                    <option value="디자인대학원">디자인대학원</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">전공/학과</label>
                                <select id="filter-major" class="search-select">
                                    <option value="">전체</option>
                                    <option value="컴퓨터공학과">컴퓨터공학과</option>
                                    <option value="경영학과">경영학과</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학위과정</label>
                                <select id="filter-degree" class="search-select">
                                    <option value="">전체</option>
                                    <option value="석사">석사</option>
                                    <option value="박사">박사</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학년도</label>
                                <select id="filter-year" class="search-select">
                                    <option value="">전체</option>
                                    <option value="2025">2025학년도</option>
                                    <option value="2024">2024학년도</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학기차</label>
                                <select id="filter-semester-count" class="search-select">
                                    <option value="">전체</option>
                                    <option value="1">1학기차</option>
                                    <option value="2">2학기차</option>
                                    <option value="3">3학기차</option>
                                    <option value="4">4학기차</option>
                                </select>
                            </div>
                            <div class="search-field">
                                <label class="search-label">학번</label>
                                <input type="text" id="filter-student-id" placeholder="학번 입력" class="search-input">
                            </div>
                            <div class="search-field">
                                <label class="search-label">성명</label>
                                <input type="text" id="filter-name" placeholder="성명 입력" class="search-input">
                            </div>
                            <div class="search-field">
                                <label class="search-label">논문명</label>
                                <input type="text" id="filter-thesis" placeholder="논문명 입력" class="search-input">
                            </div>
                        </div>
                        <div class="search-buttons">
                            <button onclick="searchReviews()" class="btn-primary">
                                <i class="fas fa-search"></i> 검색
                            </button>
                            <button onclick="resetReviewSearch()" class="btn-secondary">
                                <i class="fas fa-redo"></i> 초기화
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 콘텐츠 -->
                <div class="bg-white rounded-lg shadow-md">
                    <div class="p-6 border-b flex justify-end">
                        <button onclick="sendNotificationToSelectedReviews()"
                                class="bg-[#009DE8] text-white px-4 py-2 rounded-md hover:bg-[#0087c9] text-sm font-semibold flex items-center gap-2">
                            <i class="fas fa-bell"></i>
                            선택한 학생에게 알림 발송
                        </button>
                    </div>

                    <!-- 심사 목록 -->
                    <div id="review-list">
                        <!-- review-list.js에서 동적으로 렌더링 -->
                    </div>
                </div>
            </section>
            
            <!-- ===================================
                 학술지 대체심사 화면 (ID 54-56)
                 =================================== -->
            <section id="journal-review-screen" class="content-screen">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()"
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">학술지 논문 심사</h2>
                    </div>
                </div>

                <!-- 콘텐츠 영역 -->
                <div id="journal-review-content">
                    <!-- journal-review.js에서 동적으로 렌더링 -->
                </div>
            </section>

            <!-- ===================================
                 자료실 게시판 (ID 32)
                 =================================== -->
            <section id="board-screen" class="content-screen">
                <!-- 헤더 -->
                <div class="flex items-center justify-between mb-8">
                    <div class="flex items-center gap-4">
                        <button class="mobile-menu-toggle lg:hidden" onclick="toggleMobileMenu()"
                                style="padding: 0.5rem; background: none; border: none; cursor: pointer;">
                            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">자료실</h2>
                            <p class="text-sm text-gray-600 mt-2">학생들과 자료를 공유할 수 있습니다.</p>
                        </div>
                    </div>
                </div>

                <div id="boardContainer">
                    <!-- board.js에서 동적으로 렌더링 -->
                </div>
            </section>

            <!-- ===================================
                 논문 안내 - 공지사항
                 =================================== -->
            <section id="notice-screen" class="content-screen">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">공지사항</h2>
                </div>
                <div class="bg-white rounded-lg shadow-md p-8">
                    <div class="text-center text-gray-500">
                        <p class="text-lg">콘텐츠 준비 중입니다.</p>
                    </div>
                </div>
            </section>

            <!-- ===================================
                 논문 안내 - 연구윤리
                 =================================== -->
            <section id="ethics-screen" class="content-screen">
                <!-- JavaScript로 동적 렌더링 -->
            </section>

            <!-- ===================================
                 논문 안내 - 논문일정
                 =================================== -->
            <section id="schedule-screen" class="content-screen">
                <!-- JavaScript로 동적 렌더링 -->
            </section>

            <!-- ===================================
                 논문 안내 - 논문지도절차
                 =================================== -->
            <section id="process-screen" class="content-screen">
                <!-- JavaScript로 동적 렌더링 -->
            </section>

            <!-- ===================================
                 심사 상세 모달
                 =================================== -->
            <div id="review-detail-modal" class="review-detail-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>📄 심사 평가</h2>
                        <button class="modal-close" onclick="closeReviewDetail()">&times;</button>
                    </div>
                    <div class="modal-body" id="review-detail-content">
                        <!-- review-detail.js에서 동적으로 렌더링 -->
                    </div>
                </div>
            </div>
            
        </main>
    </div>
    
    <!-- 모바일 메뉴 오버레이 -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden" onclick="toggleMobileMenu()"></div>
    
    <!-- 모달 컨테이너 -->
    <div id="modal-container"></div>
    
    <!-- JavaScript 파일들 -->
    <script src="assets/js/mock-data.js"></script>
    <script src="assets/js/mock-data-extension.js?v=1764318008989"></script>
    <script src="assets/js/meeting-data-v2.js"></script>
    <!-- Mock 데이터 -->
    <script src="../admin/assets/js/mockData.js"></script>

    <script src="assets/js/zoom-api.js"></script>
    <script src="assets/js/review-data.js"></script>
    <script src="assets/js/common.js?v=20250119001"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/dashboard.js"></script>
    <script src="assets/js/journal-review.js"></script>
    <script src="assets/js/guidance.js?v=1764318008989"></script>
    <script src="assets/js/meeting-v2.js"></script>
    <script src="assets/js/meeting-v2-part2.js"></script>
    <script src="assets/js/feedback-data.js"></script>
    <script src="assets/js/feedback-list.js"></script>
    <script src="assets/js/feedback-viewer.js"></script>
    <script src="assets/js/feedback-tools.js"></script>
    <script src="assets/js/review-list.js"></script>
    <script src="assets/js/review-detail.js?v=20250119004"></script>
    <script src="assets/js/board.js"></script>
    <script src="assets/js/journal-review-detail.js?v=20250119004"></script>
    <script src="assets/js/semester-guidance.js"></script>
    <script src="assets/js/semester-guidance-v2.js"></script>

    <!-- 공통 유틸리티 -->
    <script src="../common-utils.js"></script>
    <script src="../common-header-utils.js"></script>
    

<!-- injected: i18n minimal handler -->
<script data-i18n-ready>
(function(){
  function getParam(n){ return new URLSearchParams(location.search).get(n); }
  var lang = getParam('lang') || 'ko';
  document.documentElement.setAttribute('lang', lang);
  // Placeholder for future dictionary binding.
})();
</script>


<!-- injected: similarity badge placeholder -->
<script>
document.addEventListener('DOMContentLoaded', function(){
  var cards = document.querySelectorAll('.submission-card, .paper-card, .review-item');
  cards.forEach(function(card){
    if (card.querySelector('[data-similarity-badge]')) return;
    var badge = document.createElement('span');
    badge.setAttribute('data-similarity-badge','');
    badge.className = 'badge';
    badge.style.marginLeft = '8px';
    badge.textContent = '유사도: —';
    var header = card.querySelector('.title, h3, h4') || card;
    header.appendChild(badge);
  });
});
</script>

<!-- 시안용 커스텀 JavaScript -->
<script>
// 서브메뉴 토글 함수
function toggleSubmenu(menuId) {
    const submenu = document.getElementById(menuId + '-submenu');
    const arrow = document.getElementById(menuId + '-arrow');

    if (submenu && arrow) {
        const isHidden = submenu.classList.contains('hidden');

        if (isHidden) {
            submenu.classList.remove('hidden');
            arrow.style.transform = 'rotate(180deg)';
        } else {
            submenu.classList.add('hidden');
            arrow.style.transform = 'rotate(0deg)';
        }
    }
}

// 논문심사 단계 선택 함수 (라디오 버튼처럼 동작 - 한 번에 하나만 선택)
let selectedReviewStage = 'all'; // 기본값: 전체

function toggleReviewStage(stageType) {
    const allBtn = document.getElementById('stage-all');
    const proposalBtn = document.getElementById('stage-proposal');
    const interimBtn = document.getElementById('stage-interim');
    const finalBtn = document.getElementById('stage-final');

    // 모든 버튼의 active 클래스 제거
    [allBtn, proposalBtn, interimBtn, finalBtn].forEach(b => {
        if (b) b.classList.remove('active');
    });

    // 선택된 버튼만 active 클래스 추가
    const selectedBtn = document.getElementById('stage-' + stageType);
    if (selectedBtn) {
        selectedBtn.classList.add('active');
        selectedReviewStage = stageType;
    }

    // 실제로는 여기서 선택된 단계에 맞는 데이터를 필터링하여 표시
    console.log('선택된 심사 단계:', selectedReviewStage);

    // 검색 함수가 있다면 호출
    if (typeof searchReviews === 'function') {
        searchReviews();
    }
}

// 논문지도현황 단계 선택 함수 (라디오 버튼처럼 동작 - 한 번에 하나만 선택)
let selectedFeedbackStage = 'all'; // 기본값: 전체

function toggleFeedbackStage(stageType) {
    const allBtn = document.getElementById('feedback-stage-all');
    const proposalBtn = document.getElementById('feedback-stage-proposal');
    const interimBtn = document.getElementById('feedback-stage-interim');
    const finalBtn = document.getElementById('feedback-stage-final');

    // 모든 버튼의 active 클래스 제거
    [allBtn, proposalBtn, interimBtn, finalBtn].forEach(b => {
        if (b) b.classList.remove('active');
    });

    // 선택된 버튼만 active 클래스 추가
    const selectedBtn = document.getElementById('feedback-stage-' + stageType);
    if (selectedBtn) {
        selectedBtn.classList.add('active');
        selectedFeedbackStage = stageType;
    }

    // 실제로는 여기서 선택된 단계에 맞는 데이터를 필터링하여 표시
    console.log('선택된 논문지도 단계:', selectedFeedbackStage);
}

// 페이지 로드 시 초기화
document.addEventListener('DOMContentLoaded', function() {
    // 서브메뉴 화살표 초기 상태 (펼쳐진 상태)
    document.querySelectorAll('[id$="-arrow"]').forEach(arrow => {
        arrow.style.transform = 'rotate(180deg)';
    });
});

// 사이드바 서브링크 클릭 시 active 처리
document.addEventListener('DOMContentLoaded', function() {
    const sublinks = document.querySelectorAll('.sidebar-sublink');
    sublinks.forEach(link => {
        link.addEventListener('click', function() {
            // 모든 서브링크의 active 제거
            sublinks.forEach(l => l.classList.remove('bg-blue-50', 'text-blue-600'));
            // 클릭된 링크에 active 추가
            this.classList.add('bg-blue-50', 'text-blue-600');
        });
    });
});
</script>

<!-- 시안용 CSS 추가 -->
<style>
.sidebar-sublink.active,
.sidebar-sublink:hover {
    background-color: #eff6ff;
    color: #2563eb;
}

/* 버튼 형태의 단계 선택 스타일 */
.review-stage-btn,
.feedback-stage-btn {
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

.review-stage-btn:active,
.feedback-stage-btn:active {
    transform: scale(0.98);
}

/* 선택 해제 상태 스타일 */
.review-stage-btn.bg-gray-300,
.feedback-stage-btn.bg-gray-300 {
    opacity: 0.6;
}

/* 자료실 테이블 스타일 개선 */
#boardContainer table {
    width: 100%;
    table-layout: fixed;
}

#boardContainer table th:nth-child(1),
#boardContainer table td:nth-child(1) {
    width: 80px;
}

#boardContainer table th:nth-child(2),
#boardContainer table td:nth-child(2) {
    width: auto;
    min-width: 200px;
}

#boardContainer table th:nth-child(3),
#boardContainer table td:nth-child(3) {
    width: 120px;
}

#boardContainer table th:nth-child(4),
#boardContainer table td:nth-child(4) {
    width: 120px;
}

#boardContainer table th:nth-child(5),
#boardContainer table td:nth-child(5) {
    width: 80px;
    text-align: center;
}

#boardContainer .overflow-x-auto {
    overflow-x: visible;
}

/* Filter Chip 버튼 스타일 (tab-btn과 동일) */
.filter-chip {
    padding: 0.75rem 1.5rem;
    border: 2px solid #E5E5E5;
    border-radius: 0.5rem;
    background: white;
    color: #999999;
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    flex-shrink: 0;
    display: inline-flex;
    align-items: center;
}

.filter-chip:hover {
    border-color: #009DE8;
    color: #009DE8;
}

.filter-chip.active {
    background: #009DE8;
    border-color: #009DE8;
    color: white;
}

.filter-chip .check-icon {
    width: 1rem;
    height: 1rem;
    margin-right: 0.25rem;
    display: none;
}

.filter-chip.active .check-icon {
    display: inline-block;
}
</style>

</body>
</html>
